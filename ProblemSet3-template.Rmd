---
title: "Predicting the US 2020 Election"
author: "Allen Li"
date: "29 Oct 2020"
output:
  pdf_document: default
  html_document:
    df_print: paged
---

GitHub link: https://github.com/youhjjhhhjj/5aoekqCEMx

```{r setup, include=FALSE}
library(tidyverse)

# Loading in the cleaned survey Data
survey_data <- read_csv("C:/Users/Allen/Desktop/survey_data.csv")

# Loading in the cleaned census Data
census_data <- read_csv("C:/Users/Allen/Desktop/census_data.csv")

```

# Model
The goal of this analysis is to predict the popular vote outcome of the 2020 American federal election. To do this a post-stratification technique is employed. The following sub-sections contain a description of the model specifics and the post-stratification calculation.

## Data
Originally, an individual's 2020 vote intention had more than two options, so all non-Trump/Biden responses were filtered out in order to make it suitable for logistic regression. Consequently, the predicted result will be the proportion of Trump and Biden voters who will vote for Trump, rather than a percentage of the popular vote. For both data sets, the various race categories were condensed into 5 main categories and an "other" category. The education levels were also organized into 8 main categories. Additionally, all data points with age below the legal voting age were removed. Unfortunately, neither data set included a variable specifying eligibility to vote, so filtering away those who are too young is the best that can be done.

## Model Specifics
Whether or not an individual will vote for Trump is a binary variable, so a logistic regression model is most appropriate. There were 4 predictor variables used, being an individual's sex, race, education, and age. These variables were chosen because it is expected that they would be relevant with regards to the individual's political leanings. The formula for the multi-variable logistic model is given by 
$$ log(\frac{p}{1-p}) = \beta_0 + \beta_1x_1 + \beta_1x_2 + ... + \beta_kx_k $$
where p is the probability of the individual voting Trump, $\beta_0$ is the log y intercept (not very meaningful in this particular context), and each x representing an predictor variable, with their corresponding $\beta$ representing the change in log odds per increase of the respective x. Predictor variables can come in the form of both numerical and categorical variables, and categorical variables can be split into multiple exclusive binary variables for ease of computation. As a logistic model, p can be interpreted as the estimated proportion of the population that will vote Trump and will always fall between 0 and 1. The model is created using R.

```{r, include=FALSE}

# Creating the Model
model <- glm(vote_trump ~ sex + race + education + age, data=survey_data, family="binomial")

# Model Results (to Report in Results section)
# summary(model)
# OR
# broom::tidy(model)

```

## Post-Stratification 
For the purpose of predicting the proportion of votes will will vote Trump, post-stratification process is carried out. Each cell consists of the individuals of a sex, race, education level, and age. These variables are some of the most influential factors behind how somebody will vote. Predictions will be generated by the previously mentioned model and each prediction will be weighted based on the proportional size of the bin that the individual of that prediction belong to. The purpose of post-stratification is to estimate the response within each cell, then weight each response in proportion to the size of each cell. This will allow 2020 election predictions to be made from the census data.

```{r, include=FALSE}


census_data$estimate <-
  model %>%
  predict(newdata = census_data, type = "response")

census_data %>%
  mutate(alp_predict_prop = estimate*n) %>%
  summarise(alp_predict = sum(alp_predict_prop)/sum(n))


```


# Results
```{r, echo=FALSE, warning=FALSE, message=FALSE}
table_data = data.frame(
  "Variable" = c("Intercept", "Male", "Black", "Chinese", "Native American", "Other", "White", "Associate Degree", "Bachelors Degree", "Completed some college, but no degree", "Completed some high school", "Doctorate degree", "High school graduate", "Masters degree", "Middle School", "Age"),
  "Estimate" = c(-0.910134, 0.451559, -1.413851, -0.600435, 0.879597, -0.043436, 0.734184, -0.559475, -0.443903, -0.329058, -0.002936, 0.051483, -0.066156, -0.379101, -0.344776, 0.009168),
  "Standard Error" = c(0.683104, 0.059717, 0.201523, 0.343417, 0.307262, 0.195512, 0.158645, 0.668719, 0.663877, 0.664583, 0.668781, 0.688928, 0.664610, 0.667322, 0.848278, 0.001849),
  "Significance" = c(0.1827, 3.98e-14, 2.29e-12, 0.0804, 0.0042, 0.8242, 3.69e-06, 0.4028, 0.5037, 0.6205, 0.9965, 0.9404, 0.9207, 0.5700, 0.6844, 7.12e-07)
)
library(kableExtra)
table_data %>%
  kbl() %>%
  kable_styling()
```
The logistic regression revealed that only a couple variables were highly relevant when considering how an individual will vote. Being male and being white are both strong positive factors for a Trump voter prediction, and each one year increase in age corresponds to a 0.009168 increase of the log odds of voting Trump. The only statistically significant negative predictor is race being black, which corresponds to a -1.413851 change in log odds. The prediction was calculated to be 0.4941381, which can be interpreted to mean 49.41381% of Trump-Biden voters will vote for Trump. This number comes after post-stratifying the prediction from the constructed logistic regression model accounting for sex, race, education level, and age.

# Discussion
## Summary
To summarize, a logistic model to predict 2020 voting behaviour based on sex, race, education level, and age was constructed using data from the Nationscape Data Set. Afterwards, the data from the IPUMS 2018 5-Year ACS was partitioned into cells consisting of individuals of every sex, race, education level, and age combination. The logistic model was used to predict the proportion of Trump voters of each cell, and these predictions were weighted based on the relative size of each cell to create a general prediction for the entire data set. 

## Conclusions
The final predicted number is 0.4941381, so an estimated 49.41977% of census respondents will vote for Trump. It was found that only 4 variables were significant, which are the individual's age, and whether or not they are Male, Black, Native American, and White. For example, a 20-year-old high-school educated white male would have a 49.78% higher chance to vote Trump than a 20-year-old high-school educated black female, but a 4.32% lower change to vote Trump than a 40-year-old high-school educated white male. Assuming the census is representative of the population of the United States, then it is predicted that 49.41381% of Trump-Biden voters will vote for Trump. On the one hand, since third-party/independent voters were not considered, the true outcome of the popular vote will likely be less for both parties. On the other hand, it is extremely improbable that third-party/independent voters will effect the result of the election in any meaningful way, so this prediction can be taken at face value. Despite the popular vote prediction slightly favouring Biden, the way the American electoral college system is structured means that Trump will likely win more electoral votes, thus making Trump the predicted winner of the 2020 US presidential election.

## Weaknesses
Both sources of data were fairly good, however certain anomalies were spotted in the data that could be cause for concern. One example would be numbers in the ages section that exceed the age of the current oldest human being. While this would not affect the calculations very much, it does call into question the quality of the data. One weakness of the analysis is that it did not take into account the survey design, finite population correction, etc which may have affected the accuracy. 

## Next Steps
As mentioned above, using additional statistical techniques in the analysis may have benefits. Another option for the future is to do a regression with a categorical variable so third party and independent voters could be taken into account, and the end prediction would be a true prediction of popular vote (as opposed to a prediction of the proportion of Trump/Biden voters voting Trump or Biden). After having completed the analysis, it has become apparent that the education level is not very relevant when considering an individual's voting intention. In future works, that variable can be omitted and additional variables, such as income or state, could be included instead.


# References
Tausanovitch, Chris and Lynn Vavreck. 2020. Democracy Fund + UCLA Nationscape, October 10-17, 2019 (version 20200814). Retrieved from https://www.voterstudygroup.org/publication/nationscape-data-set.

Steven Ruggles, Sarah Flood, Ronald Goeken, Josiah Grover, Erin Meyer, Jose Pacas and Matthew Sobek. IPUMS USA: Version 10.0 [dataset]. Minneapolis, MN: IPUMS, 2020. https://doi.org/10.18128/D010.V10.0


